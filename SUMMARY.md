# 目录

* [简介](README.md)
    * [日志](log.md)
* [前言](Book/preface/README.md)
    * [前言](Book/preface/README.md)
    * [参与](Book/preface/involved.md)
* [系统需求](Book/system/README.md)
    * [入门指南](Book/system/getting_started_guide.md)
* [1. 体系结构](Book/architecture/README.md)
    * [1.1. 体系结构概述](Book/architecture/architecture_overview.md)
* [2. Domain Model](#domain-model)
    * [2.1. Mapping types](#mapping-types)
        *   [2.1.1. Value types](#categorization-value)
        *   [2.1.2. Entity types](#categorization-entity)
    * [2.2. Naming strategies](#naming)
        *   [2.2.1. ImplicitNamingStrategy](#ImplicitNamingStrategy)
        *   [2.2.2. PhysicalNamingStrategy](#PhysicalNamingStrategy)
    * [2.3. Basic Types](#basic)
        *   [2.3.1. Hibernate-provided BasicTypes](#basic-provided)
        *   [2.3.2. The `@Basic` annotation](#basic-annotation)
        *   [2.3.3. The `@Column` annotation](#basic-column-annotation)
        *   [2.3.4. BasicTypeRegistry](#basic-registry)
        *   [2.3.5. Explicit BasicTypes](#basic-type-annotation)
        *   [2.3.6. Custom BasicTypes](#basic-custom-type)
        *   [2.3.7. Mapping enums](#basic-enums)
        *   [2.3.8. Mapping LOBs](#basic-lob)
        *   [2.3.9. Mapping Nationalized Character Data](#basic-nationalized)
        *   [2.3.10. Mapping UUID Values](#basic-uuid)
        *   [2.3.11. UUID as binary](#_uuid_as_binary)
        *   [2.3.12. UUID as (var)char](#_uuid_as_var_char)
        *   [2.3.13. PostgeSQL-specific UUID](#_postgesql_specific_uuid)
        *   [2.3.14. UUID as identifier](#_uuid_as_identifier)
        *   [2.3.15. Mapping Date/Time Values](#basic-datetime)
        *   [2.3.16. JPA 2.1 AttributeConverters](#basic-jpa-convert)
        *   [2.3.17. SQL quoted identifiers](#mapping-quoted-identifiers)
        *   [2.3.18. Generated properties](#mapping-generated)
        *   [2.3.19. Column transformers: read and write expressions](#mapping-column-read-and-write)
        *   [2.3.20. @Formula](#mapping-column-formula)
        *   [2.3.21. @Where](#mapping-column-where)
        *   [2.3.22. @Filter](#mapping-column-filter)
        *   [2.3.23. @Any mapping](#mapping-column-any)
    * [2.4. Embeddable types](#embeddables)
        *   [2.4.1. Component / Embedded](#_component_embedded)
        *   [2.4.2. Multiple embeddable types](#embeddable-multiple)
        *   [2.4.3. JPA&#8217;s AttributeOverride](#embeddable-multiple-jpa)
        *   [2.4.4. ImplicitNamingStrategy](#embeddable-multiple-namingstrategy)
        *   [2.4.5. Collections of embeddable types](#embeddable-collections)
        *   [2.4.6. Embeddable types as Map key](#embeddable-mapkey)
        *   [2.4.7. Embeddable types as identifiers](#embeddable-identifier)
    * [2.5. Entity types](#entity)
        *   [2.5.1. POJO Models](#entity-pojo)
        *   [2.5.2. Prefer non-final classes](#entity-pojo-final)
        *   [2.5.3. Implement a no-argument constructor](#entity-pojo-constructor)
        *   [2.5.4. Declare getters and setters for persistent attributes](#entity-pojo-accessors)
        *   [2.5.5. Provide identifier attribute(s)](#entity-pojo-identifier)
        *   [2.5.6. Mapping the entity](#entity-pojo-mapping)
        *   [2.5.7. Implementing `equals()` and `hashCode()`](#mapping-model-pojo-equalshashcode)
        *   [2.5.8. Mapping optimistic locking](#entity-pojo-optlock)
        *   [2.5.9. Access strategies](#access)
    *  [2.6. Identifiers](#identifiers)
        *   [2.6.1. Simple identifiers](#identifiers-simple)
        *   [2.6.2. Composite identifiers](#identifiers-composite)
        *   [2.6.3. Composite identifiers with `@EmbeddedId`](#identifiers-composite-aggregated)
        *   [2.6.4. Composite identifiers with `@IdClass`](#identifiers-composite-nonaggregated)
        *   [2.6.5. Composite identifiers with associations](#identifiers-composite-associations)
        *   [2.6.6. Generated identifier values](#identifiers-generators)
        *   [2.6.7. Interpreting AUTO](#identifiers-generators-auto)
        *   [2.6.8. Using sequences](#identifiers-generators-sequence)
        *   [2.6.9. Using IDENTITY columns](#identifiers-generators-identity)
        *   [2.6.10. Using identifier table](#identifiers-generators-table)
        *   [2.6.11. Using UUID generation](#identifiers-generators-uuid)
        *   [2.6.12. Using @GenericGenerator](#identifiers-generators-generic)
        *   [2.6.13. Optimizers](#identifiers-generators-optimizer)
        *   [2.6.14. Derived Identifiers](#identifiers-derived)
    * [2.7. Associations](#associations)
        *   [2.7.1. `@ManyToOne`](#associations-many-to-one)
        *   [2.7.2. `@OneToMany`](#associations-one-to-many)
        *   [2.7.3. `@OneToOne`](#associations-one-to-one)
        *   [2.7.4. `@ManyToMany`](#associations-many-to-many)
    * [2.8. Collections](#collections)
        *   [2.8.1. Collections as a value type](#collections-synopsis)
        *   [2.8.2. Collections of value types](#collections-value)
        *   [2.8.3. Collections of entities](#collections-entity)
        *   [2.8.4. Bags](#collections-bag)
        *   [2.8.5. Ordered Lists](#collections-list)
        *   [2.8.6. Sets](#collections-set)
        *   [2.8.7. Sorted sets](#collections-sorted-set)
        *   [2.8.8. Maps](#collections-map)
        *   [2.8.9. Arrays](#collections-array)
        *   [2.8.10. Arrays as binary](#collections-array-binary)
        *   [2.8.11. Collections as basic value type](#collections-as-basic)
        *   [2.8.12. Custom collection types](#collections-custom)
    * [2.9. Natural Ids](#naturalid)
        *   [2.9.1. Natural Id Mapping](#naturalid-mapping)
        *   [2.9.2. Natural Id API](#naturalid-api)
        *   [2.9.3. Natural Id - Mutability and Caching](#naturalid-mutability-caching)
    * [2.10. Dynamic Model](#dynamic-model)
        *   [2.10.1. Dynamic mapping models](#mapping-model-dynamic)
    * [2.11. Inheritance](#entity-inheritance)
        *   [2.11.1. MappedSuperclass](#entity-inheritance-mapped-superclass)
        *   [2.11.2. Single table](#entity-inheritance-single-table)
        *   [2.11.3. Joined table](#entity-inheritance-joined-table)
        *   [2.11.4. Table per class](#entity-inheritance-table-per-class)
        *   [2.12. Immutability](#entity-immutability)
            *   [2.12.1. Entity immutability](#_entity_immutability)
        *   [2.12.2. Collection immutability](#_collection_immutability)
*   [3. Bootstrap](#bootstrap)
    *   [3.1. JPA Bootstrapping](#bootstrap-jpa)
        *   [3.1.1. JPA-compliant bootstrapping](#bootstrap-jpa-compliant)
        *   [3.1.2. Externalizing XML mapping files](#bootstrap-jpa-xml-files)
        *   [3.2. Native Bootstrapping](#bootstrap-native)
        *   [3.2.1. Building the ServiceRegistry](#bootstrap-native-registry)
        *   [3.2.2. Event Listener registration](#bootstrap-event-listener-registration)
        *   [3.2.3. Building the Metadata](#bootstrap-native-metadata)
        *   [3.2.4. Building the SessionFactory](#bootstrap-native-SessionFactory)
*   [4. Schema generation](#schema-generation)
    *   [4.1. Importing script files](#schema-generation-script-files)
    *   [4.2. Database objects](#schema-generation-database-objects)
    *   [4.3. Database-level checks](#schema-generation-database-checks)
    *   [4.4. Default value for database column](#schema-generation-column-default-value)
*   [5. Persistence Contexts](#pc)
    *   [5.1. Accessing Hibernate APIs from JPA](#pc-unwrap)
    *   [5.2. Bytecode Enhancement](#BytecodeEnhancement)
            *   [5.2.1. Capabilities](#BytecodeEnhancement-capabilities)
        *   [5.2.2. Performing enhancement](#BytecodeEnhancement-enhancement)
        *   [5.3. Making entities persistent](#pc-persist)
    *   [5.4. Deleting (removing) entities](#pc-remove)
    *   [5.5. Obtain an entity reference without initializing its data](#pc-get-reference)
    *   [5.6. Obtain an entity with its data initialized](#pc-find)
    *   [5.7. Obtain an entity by natural-id](#pc-find-natural-id)
    *   [5.8. Modifying managed/persistent state](#pc-managed-state)
    *   [5.9. Refresh entity state](#pc-refresh)
            *   [5.9.1. Refresh gotchas](#pc-refresh-gotchas)
        *   [5.10. Working with detached data](#pc-detach)
            *   [5.10.1. Reattaching detached data](#pc-detach-reattach)
        *   [5.10.2. Merging detached data](#pc-merge)
        *   [5.11. Checking persistent state](#pc-contains)
    *   [5.12. Evicting entities](#_evicting_entities)
*   [6. Flushing](#flushing)
    *   [6.1. `AUTO` flush](#flushing-auto)
            *   [6.1.1. `AUTO` flush on commit](#__code_auto_code_flush_on_commit)
        *   [6.1.2. `AUTO` flush on JPQL/HQL query](#__code_auto_code_flush_on_jpql_hql_query)
        *   [6.1.3. `AUTO` flush on native SQL query](#__code_auto_code_flush_on_native_sql_query)
        *   [6.2. `COMMIT` flush](#flushing-commit)
    *   [6.3. `ALWAYS` flush](#flushing-always)
    *   [6.4. `MANUAL` flush](#flushing-manual)
    *   [6.5. Flush operation order](#flushing-order)
*   [7. Database access](#database)
    *   [7.1. ConnectionProvider](#database-connectionprovider)
    *   [7.2. Using DataSources](#database-connectionprovider-datasource)
    *   [7.3. Using c3p0](#database-connectionprovider-c3p0)
    *   [7.4. Using Proxool](#database-connectionprovider-proxool)
    *   [7.5. Using existing Proxool pools](#database-connectionprovider-proxool-existing)
    *   [7.6. Configuring Proxool via XML](#database-connectionprovider-proxool-jaxp)
    *   [7.7. Configuring Proxool via Properties](#database-connectionprovider-proxool-properties)
    *   [7.8. Using Hikari](#database-connectionprovider-hikari)
    *   [7.9. Using Hibernate&#8217;s built-in (and unsupported) pooling](#database-connectionprovider-drivermanager)
    *   [7.10. User-provided Connections](#database-connectionprovider-provided)
    *   [7.11. ConnectionProvider support for transaction isolation setting](#database-connectionprovider-isolation)
    *   [7.12. Database Dialect](#database-dialect)
*   [8. Transactions and concurrency control](#transactions)
    *   [8.1. Physical Transactions](#transactions-physical)
    *   [8.2. JTA configuration](#transactions-physical-jtaplatform)
    *   [8.3. Hibernate Transaction API](#transactions-api)
    *   [8.4. Contextual sessions](#architecture-current-session)
    *   [8.5. Transactional patterns (and anti-patterns)](#_transactional_patterns_and_anti_patterns)
    *   [8.6. Session-per-operation anti-pattern](#session-per-operation)
    *   [8.7. Session-per-request pattern](#session-per-request)
    *   [8.8. Conversations](#long-conversations)
    *   [8.9. Session-per-application](#session-per-application)
*   [9. JNDI](#jndi)
*   [10. Locking](#locking)
    *   [10.1. Optimistic](#_optimistic)
    *   [10.2. Dedicated version number](#locking-optimistic-version-number)
    *   [10.3. Timestamp](#locking-optimistic-timestamp)
    *   [10.4. Pessimistic](#locking-pessimistic)
    *   [10.5. `LockMode` and `LockModeType`](#locking-LockMode)
    *   [10.6. JPA locking query hints](#locking-jpa-query-hints)
    *   [10.7. The `buildLockRequest` API](#locking-buildLockRequest)
    *   [10.8. Follow-on-locking](#locking-follow-on)
*   [11. Fetching](#fetching)
    *   [11.1. The basics](#fetching-basics)
    *   [11.2. Applying fetch strategies](#fetching-strategies)
    *   [11.3. No fetching](#fetching-strategies-no-fetching)
    *   [11.4. Dynamic fetching via queries](#fetching-strategies-dynamic-fetching)
    *   [11.5. Dynamic fetching via JPA entity graph](#fetching-strategies-dynamic-fetching-entity-graph)
    *   [11.6. Dynamic fetching via Hibernate profiles](#fetching-strategies-dynamic-fetching-profile)
    *   [11.7. Batch fetching](#fetching-batch)
    *   [11.8. The `@Fetch` annotation mapping](#fetching-fetch-annotation)
    *   [11.9. `FetchMode.SELECT`](#fetching-fetchmode-select)
    *   [11.10. `FetchMode.SUBSELECT`](#fetching-fetchmode-subselect)
    *   [11.11. `FetchMode.JOIN`](#fetching-fetchmode-join)
*   [12. Batching](#batch)
    *   [12.1. JDBC batching](#batch-jdbcbatch)
    *   [12.2. Session batching](#batch-session-batch)
            *   [12.2.1. Batch inserts](#batch-session-batch-insert)
        *   [12.2.2. Session scroll](#batch-session-scroll)
        *   [12.2.3. StatelessSession](#_statelesssession)
        *   [12.3. Hibernate Query Language for DML](#batch-bulk-hql)
            *   [12.3.1. HQL/JPQL for UPDATE and DELETE](#batch-bulk-hql-update-delete)
        *   [12.3.2. HQL syntax for INSERT](#_hql_syntax_for_insert)
*   [13. Caching](#caching)
    *   [13.1. Configuring second-level caching](#caching-config)
            *   [13.1.1. RegionFactory](#caching-config-provider)
        *   [13.1.2. Caching configuration properties](#caching-config-properties)
        *   [13.2. Configuring second-level cache mappings](#caching-mappings)
    *   [13.3. Entity inheritance and second-level cache mapping](#caching-mappings-inheritance)
    *   [13.4. Entity cache](#caching-query)
    *   [13.5. Collection cache](#caching-collection)
    *   [13.6. Query cache](#caching-query)
            *   [13.6.1. Query cache regions](#caching-query-region)
        *   [13.7. Managing the cached data](#caching-management)
            *   [13.7.1. Evicting cache entries](#caching-management-evict)
        *   [13.8. Caching statistics](#caching-statistics)
    *   [13.9. JCache](#caching-provider-jcache)
            *   [13.9.1. RegionFactory](#caching-provider-jcache-region-factory)
        *   [13.9.2. JCache `CacheManager`](#caching-provider-jcache-cache-manager)
        *   [13.10. Ehcache](#caching-provider-ehcache)
            *   [13.10.1. RegionFactory](#caching-provider-ehcache-region-factory)
        *   [13.11. Infinispan](#caching-provider-infinispan)
            *   [13.11.1. RegionFactory](#caching-provider-infinispan-region-factory)
        *   [13.11.2. Configuration properties](#caching-provider-infinispan-config)
*   [14. Interceptors and events](#events)
    *   [14.1. Interceptors](#events-interceptors)
    *   [14.2. Native Event system](#events-events)
    *   [14.3. Mixing Events and Interceptors](#events-mixing-events-and-interceptors)
    *   [14.4. Hibernate declarative security](#events-declarative-security)
    *   [14.5. JPA Callbacks](#events-jpa-callbacks)
*   [15. HQL and JPQL](#hql)
    *   [15.1. Query API](#query-api)
    *   [15.2. Examples domain model](#hql-examples-domain-model)
    *   [15.3. JPA Query API](#jpql-api)
    *   [15.4. Hibernate Query API](#hql-api)
            *   [15.4.1. Query scrolling](#hql-api-scroll)
        *   [15.5. Case Sensitivity](#hql-case-sensitivity)
    *   [15.6. Statement types](#hql-statement-types)
    *   [15.7. Select statements](#hql-select)
    *   [15.8. Update statements](#hql-update)
    *   [15.9. Delete statements](#hql-delete)
    *   [15.10. Insert statements](#hql-insert)
    *   [15.11. The `FROM` clause](#hql-from-clause)
    *   [15.12. Identification variables](#hql-identification-variables)
    *   [15.13. Root entity references](#hql-root-reference)
    *   [15.14. Explicit joins](#hql-explicit-join)
    *   [15.15. Implicit joins (path expressions)](#hql-implicit-join)
    *   [15.16. Distinct](#hql-distinct)
            *   [15.16.1. Using DISTINCT with SQL projections](#hql-distinct-projection-query)
        *   [15.16.2. Using DISTINCT with entity queries](#hql-distinct-entity-query)
        *   [15.17. Collection member references](#hql-collection-valued-associations)
    *   [15.18. Special case - qualified path expressions](#hql-collection-qualification)
    *   [15.19. Polymorphism](#hql-polymorphism)
    *   [15.20. Expressions](#hql-expressions)
    *   [15.21. Identification variable](#hql-identification-variable)
    *   [15.22. Path expressions](#hql-path-expressions)
    *   [15.23. Literals](#hql-literals)
    *   [15.24. Arithmetic](#hql-numeric-arithmetic)
    *   [15.25. Concatenation (operation)](#hql-concatenation)
    *   [15.26. Aggregate functions](#hql-aggregate-functions)
    *   [15.27. Scalar functions](#hql-exp-functions)
    *   [15.28. JPQL standardized functions](#jpql-standardized-functions)
    *   [15.29. HQL functions](#hql-functions)
    *   [15.30. Non-standardized functions](#hql-non-standard-functions)
    *   [15.31. Collection-related expressions](#hql-collection-expressions)
    *   [15.32. Entity type](#hql-entity-type-exp)
    *   [15.33. CASE expressions](#hql-case-expressions)
    *   [15.34. Simple CASE expressions](#hql-simple-case-expressions)
    *   [15.35. Searched CASE expressions](#hql-searched-case-expressions)
    *   [15.36. NULLIF expressions](#hql-nullif)
    *   [15.37. COALESCE expressions](#_coalesce_expressions)
    *   [15.38. The `SELECT` clause](#hql-select-clause)
    *   [15.39. Predicates](#hql-conditional-expressions)
    *   [15.40. Relational comparisons](#hql-relational-comparisons)
    *   [15.41. Nullness predicate](#hql-null-predicate)
    *   [15.42. Like predicate](#hql-like-predicate)
    *   [15.43. Between predicate](#hql-between-predicate)
    *   [15.44. In predicate](#hql-in-predicate)
    *   [15.45. Exists predicate](#hql-exists-predicate)
    *   [15.46. Empty collection predicate](#hql-empty-collection-predicate)
    *   [15.47. Member-of collection predicate](#hql-member-of-collection-predicate)
    *   [15.48. NOT predicate operator](#hql-not-predicate)
    *   [15.49. AND predicate operator](#hql-and-predicate)
    *   [15.50. OR predicate operator](#hql-or-predicate)
    *   [15.51. The `WHERE` clause](#hql-where-clause)
    *   [15.52. Group by](#hql-group-by)
    *   [15.53. Order by](#hql-order-by)
    *   [15.54. Read-only entities](#hql-read-only-entities)
*   [16. Criteria](#criteria)
    *   [16.1. Typed criteria queries](#criteria-typedquery)
    *   [16.2. Selecting an entity](#criteria-typedquery-entity)
    *   [16.3. Selecting an expression](#criteria-typedquery-expression)
    *   [16.4. Selecting multiple values](#criteria-typedquery-multiselect)
    *   [16.5. Selecting a wrapper](#criteria-typedquery-wrapper)
    *   [16.6. Tuple criteria queries](#criteria-tuple)
    *   [16.7. FROM clause](#criteria-from)
    *   [16.8. Roots](#criteria-from-root)
    *   [16.9. Joins](#criteria-from-join)
    *   [16.10. Fetches](#criteria-from-fetch)
    *   [16.11. Path expressions](#criteria-path)
    *   [16.12. Using parameters](#criteria-param)
    *   [16.13. Using group by](#criteria-group-by)
*   [17. Native SQL Queries](#sql)
    *   [17.1. Creating a native query using JPA](#sql-jpa-query)
    *   [17.2. Scalar queries](#sql-scalar-query)
    *   [17.3. Entity queries](#sql-entity-query)
    *   [17.4. Handling associations and collections](#sql-entity-associations-query)
    *   [17.5. Returning multiple entities](#sql-multi-entity-query)
    *   [17.6. Alias and property references](#sql-alias-references)
    *   [17.7. Returning DTOs (Data Transfer Objects)](#sql-dto-query)
    *   [17.8. Handling inheritance](#sql-inheritance-query)
    *   [17.9. Parameters](#sql-query-parameters)
    *   [17.10. Named SQL queries](#sql-named-queries)
            *   [17.10.1. Named SQL queries selecting scalar values](#sql-scalar-named-queries)
        *   [17.10.2. Named SQL queries selecting entities](#sql-entity-named-queries)
        *   [17.11. Resolving global catalog and schema in native SQL queries](#sql-global-catalog-schema)
    *   [17.12. Using stored procedures for querying](#sql-sp)
    *   [17.13. Custom SQL for create, update, and delete](#sql-crud)
*   [18. Spatial](#spatial)
    *   [18.1. Overview](#spatial-overview)
    *   [18.2. Configuration](#spatial-configuration)
            *   [18.2.1. Dependency](#spatial-configuration-dependency)
        *   [18.2.2. Dialects](#spatial-configuration-dialect)
        *   [18.3. Types](#spatial-types)
*   [19. Multitenancy](#multitenacy)
    *   [19.1. What is multitenancy?](#multitenacy-intro)
    *   [19.2. Multitenant data approaches](#multitenacy-approaches)
            *   [19.2.1. Separate database](#multitenacy-separate-database)
        *   [19.2.2. Separate schema](#multitenacy-separate-schema)
        *   [19.3. Partitioned (discriminator) data](#multitenacy-discriminator)
    *   [19.4. Multitenancy in Hibernate](#multitenacy-hibernate)
            *   [19.4.1. MultiTenantConnectionProvider](#multitenacy-hibernate-MultiTenantConnectionProvider)
        *   [19.4.2. CurrentTenantIdentifierResolver](#multitenacy-hibernate-MultiTenantConnectionProvider)
        *   [19.4.3. Caching](#multitenacy-hibernate-caching)
*   [20. OSGi](#osgi)
    *   [20.1. OSGi Specification and Environment](#_osgi_specification_and_environment)
    *   [20.2. hibernate-osgi](#_hibernate_osgi)
    *   [20.3. features.xml](#_features_xml)
    *   [20.4. QuickStarts/Demos](#_quickstarts_demos)
    *   [20.5. Container-Managed JPA](#osgi-managed-jpa)
    *   [20.6. Enterprise OSGi JPA Container](#_enterprise_osgi_jpa_container)
    *   [20.7. persistence.xml](#_persistence_xml)
    *   [20.8. DataSource](#_datasource)
    *   [20.9. Bundle Package Imports](#_bundle_package_imports)
    *   [20.10. Obtaining an EntityManger](#_obtaining_an_entitymanger)
    *   [20.11. Unmanaged JPA](#osgi-unmanaged-jpa)
    *   [20.12. persistence.xml](#_persistence_xml_2)
    *   [20.13. Bundle Package Imports](#_bundle_package_imports_2)
    *   [20.14. Obtaining an EntityMangerFactory](#_obtaining_an_entitymangerfactory)
    *   [20.15. Unmanaged Native](#osgi-unmanaged-native)
    *   [20.16. Bundle Package Imports](#_bundle_package_imports_3)
    *   [20.17. Obtaining an SessionFactory](#_obtaining_an_sessionfactory)
    *   [20.18. Optional Modules](#_optional_modules)
    *   [20.19. Extension Points](#_extension_points)
    *   [20.20. Caveats](#_caveats)
*   [21. Envers](#envers)
    *   [21.1. Basics](#_basics)
    *   [21.2. Configuration](#envers-configuration)
    *   [21.3. Additional mapping annotations](#_additional_mapping_annotations)
    *   [21.4. Choosing an audit strategy](#_choosing_an_audit_strategy)
    *   [21.5. Revision Log](#envers-revisionlog)
    *   [21.6. Tracking entity names modified during revisions](#envers-tracking-modified-entities-revchanges)
    *   [21.7. Tracking entity changes at property level](#envers-tracking-properties-changes)
    *   [21.8. Queries](#envers-queries)
    *   [21.9. Querying for entities of a class at a given revision](#entities-at-revision)
    *   [21.10. Querying for revisions, at which entities of a given class changed](#revisions-of-entity)
    *   [21.11. Querying for revisions of entity that modified given property](#envers-tracking-properties-changes-queries)
    *   [21.12. Querying for entities modified in a given revision](#envers-tracking-modified-entities-queries)
    *   [21.13. Querying for entities using entity relation joins](#envers-querying-entity-relation-jobs)
    *   [21.14. Conditional auditing](#_conditional_auditing)
    *   [21.15. Understanding the Envers Schema](#_understanding_the_envers_schema)
    *   [21.16. Generating schema with Ant](#envers-generateschema)
    *   [21.17. Mapping exceptions](#envers-mappingexceptions)
            *   [21.17.1. What isn&#8217;t and will not be supported](#_what_isn_t_and_will_not_be_supported)
        *   [21.17.2. What isn&#8217;t and _will_ be supported](#_what_isn_t_and_em_will_em_be_supported)
        *   [21.18. `@OneToMany` with `@JoinColumn`](#__code_onetomany_code_with_code_joincolumn_code)
    *   [21.19. Advanced: Audit table partitioning](#envers-partitioning)
    *   [21.20. Benefits of audit table partitioning](#envers-partitioning-benefits)
    *   [21.21. Suitable columns for audit table partitioning](#envers-partitioning-columns)
    *   [21.22. Audit table partitioning example](#envers-partitioning-example)
    *   [21.23. Determining a suitable partitioning column](#envers-partitioning-example-column)
    *   [21.24. Determining a suitable partitioning scheme](#envers-partitioning-example-scheme)
    *   [21.25. Envers links](#envers-links)
*   [22. Database Portability Considerations](#portability)
    *   [22.1. Portability Basics](#portability-basics)
    *   [22.2. Dialect](#portability-dialect)
    *   [22.3. Dialect resolution](#portability-dialectresolver)
    *   [22.4. Identifier generation](#portability-idgen)
    *   [22.5. Database functions](#portability-functions)
    *   [22.6. Type mappings](#portability-types)
            *   [22.6.1. BLOB/CLOB mappings](#portability-types-lobs)
        *   [22.6.2. Boolean mappings](#portability-types-bool)
*   [23. Configurations](#configurations)
    *   [23.1. Strategy configurations](#configurations-strategy)
    *   [23.2. General Configuration](#configurations-general)
    *   [23.3. Database connection properties](#configurations-database-connection)
    *   [23.4. c3p0 properties](#configurations-c3p0)
    *   [23.5. Mapping Properties](#configurations-mapping)
    *   [23.6. Bytecode Enhancement Properties](#configurations-bytecode-enhancement)
    *   [23.7. Query settings](#configurations-query)
    *   [23.8. Batching properties](#configurations-batch)
            *   [23.8.1. Fetching properties](#configurations-database-fetch)
        *   [23.9. Statement logging and statistics](#configurations-logging)
    *   [23.10. Cache Properties](#configurations-cache)
    *   [23.11. Infinispan properties](#configurations-infinispan)
    *   [23.12. Transactions properties](#configurations-transactions)
    *   [23.13. Multi-tenancy settings](#configurations-multi-tenancy)
    *   [23.14. Automatic schema generation](#configurations-hbmddl)
    *   [23.15. Exception handling](#configurations-exception-handling)
    *   [23.16. Session events](#configurations-session-events)
    *   [23.17. JMX settings](#configurations-jmx)
    *   [23.18. JACC settings](#configurations-jacc)
    *   [23.19. ClassLoaders properties](#configurations-misc)
    *   [23.20. Bootstrap properties](#configurations-bootstrap)
    *   [23.21. Miscellaneous properties](#configurations-misc)
    *   [23.22. Envers properties](#configurations-envers)
    *   [23.23. Spatial properties](#configurations-spatial)
    *   [23.24. Internal properties](#configurations-internal)
*   [24. Mapping annotations](#annotations)
    *   [24.1. JPA annotations](#annotations-jpa)
            *   [24.1.1. `@Access`](#annotations-jpa-access)
        *   [24.1.2. `@AssociationOverride`](#annotations-jpa-associationoverride)
        *   [24.1.3. `@AssociationOverrides`](#annotations-jpa-associationoverrides)
        *   [24.1.4. `@AttributeOverride`](#annotations-jpa-attributeoverride)
        *   [24.1.5. `@AttributeOverrides`](#annotations-jpa-attributeoverrides)
        *   [24.1.6. `@Basic`](#annotations-jpa-basic)
        *   [24.1.7. `@Cacheable`](#annotations-jpa-cacheable)
        *   [24.1.8. `@CollectionTable`](#annotations-jpa-collectiontable)
        *   [24.1.9. `@Column`](#annotations-jpa-column)
        *   [24.1.10. `@ColumnResult`](#annotations-jpa-columnresult)
        *   [24.1.11. `@ConstructorResult`](#annotations-jpa-constructorresult)
        *   [24.1.12. `@Convert`](#annotations-jpa-convert)
        *   [24.1.13. `@Converter`](#annotations-jpa-converter)
        *   [24.1.14. `@Converts`](#annotations-jpa-converts)
        *   [24.1.15. `@DiscriminatorColumn`](#annotations-jpa-discriminatorcolumn)
        *   [24.1.16. `@DiscriminatorValue`](#annotations-jpa-discriminatorvalue)
        *   [24.1.17. `@ElementCollection`](#annotations-jpa-elementcollection)
        *   [24.1.18. `@Embeddable`](#annotations-jpa-embeddable)
        *   [24.1.19. `@Embedded`](#annotations-jpa-embedded)
        *   [24.1.20. `@EmbeddedId`](#annotations-jpa-embeddedid)
        *   [24.1.21. `@Entity`](#annotations-jpa-entity)
        *   [24.1.22. `@EntityListeners`](#annotations-jpa-entitylisteners)
        *   [24.1.23. `@EntityResult`](#annotations-jpa-entityresult)
        *   [24.1.24. `@Enumerated`](#annotations-jpa-enumerated)
        *   [24.1.25. `@ExcludeDefaultListeners`](#annotations-jpa-excludedefaultlisteners)
        *   [24.1.26. `@ExcludeSuperclassListeners`](#annotations-jpa-excludesuperclasslisteners)
        *   [24.1.27. `@FieldResult`](#annotations-jpa-fieldresult)
        *   [24.1.28. `@ForeignKey`](#annotations-jpa-foreignkey)
        *   [24.1.29. `@GeneratedValue`](#annotations-jpa-generatedvalue)
        *   [24.1.30. `@Id`](#annotations-jpa-id)
        *   [24.1.31. `@IdClass`](#annotations-jpa-idclass)
        *   [24.1.32. `@Index`](#annotations-jpa-index)
        *   [24.1.33. `@Inheritance`](#annotations-jpa-inheritance)
        *   [24.1.34. `@JoinColumn`](#annotations-jpa-joincolumn)
        *   [24.1.35. `@JoinColumns`](#annotations-jpa-joincolumns)
        *   [24.1.36. `@JoinTable`](#annotations-jpa-jointable)
        *   [24.1.37. `@Lob`](#annotations-jpa-lob)
        *   [24.1.38. `@ManyToMany`](#annotations-jpa-manytomany)
        *   [24.1.39. `@ManyToOne`](#annotations-jpa-manytoone)
        *   [24.1.40. `@MapKey`](#annotations-jpa-mapkey)
        *   [24.1.41. `@MapKeyClass`](#annotations-jpa-mapkeyclass)
        *   [24.1.42. `@MapKeyColumn`](#annotations-jpa-mapkeycolumn)
        *   [24.1.43. `@MapKeyEnumerated`](#annotations-jpa-mapkeyenumerated)
        *   [24.1.44. `@MapKeyJoinColumn`](#annotations-jpa-mapkeyjoincolumn)
        *   [24.1.45. `@MapKeyJoinColumns`](#annotations-jpa-mapkeyjoincolumns)
        *   [24.1.46. `@MapKeyTemporal`](#annotations-jpa-mapkeytemporal)
        *   [24.1.47. `@MappedSuperclass`](#annotations-jpa-mappedsuperclass)
        *   [24.1.48. `@MapsId`](#annotations-jpa-mapsid)
        *   [24.1.49. `@NamedAttributeNode`](#annotations-jpa-namedattributenode)
        *   [24.1.50. `@NamedEntityGraph`](#annotations-jpa-namedentitygraph)
        *   [24.1.51. `@NamedEntityGraphs`](#annotations-jpa-namedentitygraphs)
        *   [24.1.52. `@NamedNativeQueries`](#annotations-jpa-namednativequeries)
        *   [24.1.53. `@NamedNativeQuery`](#annotations-jpa-namednativequery)
        *   [24.1.54. `@NamedQueries`](#annotations-jpa-namedqueries)
        *   [24.1.55. `@NamedQuery`](#annotations-jpa-namedquery)
        *   [24.1.56. `@NamedStoredProcedureQueries`](#annotations-jpa-namedstoredprocedurequeries)
        *   [24.1.57. `@NamedStoredProcedureQuery`](#annotations-jpa-namedstoredprocedurequery)
        *   [24.1.58. `@NamedSubgraph`](#annotations-jpa-namedsubgraph)
        *   [24.1.59. `@OneToMany`](#annotations-jpa-onetomany)
        *   [24.1.60. `@OneToOne`](#annotations-jpa-onetoone)
        *   [24.1.61. `@OrderBy`](#annotations-jpa-orderby)
        *   [24.1.62. `@OrderColumn`](#annotations-jpa-ordercolumn)
        *   [24.1.63. `@PersistenceContext`](#annotations-jpa-persistencecontext)
        *   [24.1.64. `@PersistenceContexts`](#annotations-jpa-persistencecontexts)
        *   [24.1.65. `@PersistenceProperty`](#annotations-jpa-persistenceproperty)
        *   [24.1.66. `@PersistenceUnit`](#annotations-jpa-persistenceunit)
        *   [24.1.67. `@PersistenceUnits`](#annotations-jpa-persistenceunits)
        *   [24.1.68. `@PostLoad`](#annotations-jpa-postload)
        *   [24.1.69. `@PostPersist`](#annotations-jpa-postpersist)
        *   [24.1.70. `@PostRemove`](#annotations-jpa-postremove)
        *   [24.1.71. `@PostUpdate`](#annotations-jpa-postupdate)
        *   [24.1.72. `@PrePersist`](#annotations-jpa-prepersist)
        *   [24.1.73. `@PreRemove`](#annotations-jpa-preremove)
        *   [24.1.74. `@PreUpdate`](#annotations-jpa-preupdate)
        *   [24.1.75. `@PrimaryKeyJoinColumn`](#annotations-jpa-primarykeyjoincolumn)
        *   [24.1.76. `@PrimaryKeyJoinColumns`](#annotations-jpa-primarykeyjoincolumns)
        *   [24.1.77. `@QueryHint`](#annotations-jpa-queryhint)
        *   [24.1.78. `@SecondaryTable`](#annotations-jpa-secondarytable)
        *   [24.1.79. `@SecondaryTables`](#annotations-jpa-secondarytables)
        *   [24.1.80. `@SequenceGenerator`](#annotations-jpa-sequencegenerator)
        *   [24.1.81. `@SqlResultSetMapping`](#annotations-jpa-sqlresultsetmapping)
        *   [24.1.82. `@SqlResultSetMappings`](#annotations-jpa-sqlresultsetmappings)
        *   [24.1.83. `@StoredProcedureParameter`](#annotations-jpa-storedprocedureparameter)
        *   [24.1.84. `@Table`](#annotations-jpa-table)
        *   [24.1.85. `@TableGenerator`](#annotations-jpa-tablegenerator)
        *   [24.1.86. `@Temporal`](#annotations-jpa-temporal)
        *   [24.1.87. `@Transient`](#annotations-jpa-transient)
        *   [24.1.88. `@UniqueConstraint`](#annotations-jpa-uniqueconstraint)
        *   [24.1.89. `@Version`](#annotations-jpa-version)
        *   [24.2. Hibernate annotations](#annotations-hibernate)
            *   [24.2.1. <span class="line-through">`@AccessType`</span>](#annotations-hibernate-accesstype)
        *   [24.2.2. `@Any`](#annotations-hibernate-any)
        *   [24.2.3. `@AnyMetaDef`](#annotations-hibernate-anymetadef)
        *   [24.2.4. `@AnyMetaDefs`](#annotations-hibernate-anymetadefs)
        *   [24.2.5. `@AttributeAccessor`](#annotations-hibernate-attributeaccessor)
        *   [24.2.6. `@BatchSize`](#annotations-hibernate-batchsize)
        *   [24.2.7. `@Cache`](#annotations-hibernate-cache)
        *   [24.2.8. `@Cascade`](#annotations-hibernate-cascade)
        *   [24.2.9. `@Check`](#annotations-hibernate-check)
        *   [24.2.10. `@CollectionId`](#annotations-hibernate-collectionid)
        *   [24.2.11. `@CollectionType`](#annotations-hibernate-collectiontype)
        *   [24.2.12. `@ColumnDefault`](#annotations-hibernate-columndefault)
        *   [24.2.13. `@Columns`](#annotations-hibernate-columns)
        *   [24.2.14. `@ColumnTransformer`](#annotations-hibernate-columntransformer)
        *   [24.2.15. `@ColumnTransformers`](#annotations-hibernate-columntransformers)
        *   [24.2.16. `@CreationTimestamp`](#annotations-hibernate-creationtimestamp)
        *   [24.2.17. `@DiscriminatorFormula`](#annotations-hibernate-discriminatorformula)
        *   [24.2.18. `@DiscriminatorOptions`](#annotations-hibernate-discriminatoroptions)
        *   [24.2.19. `@DynamicInsert`](#annotations-hibernate-dynamicinsert)
        *   [24.2.20. `@DynamicUpdate`](#annotations-hibernate-dynamicupdate)
        *   [24.2.21. <span class="line-through">`@Entity`</span>](#annotations-hibernate-entity)
        *   [24.2.22. `@Fetch`](#annotations-hibernate-fetch)
        *   [24.2.23. `@FetchProfile`](#annotations-hibernate-fetchprofile)
        *   [24.2.24. `@FetchProfile.FetchOverride`](#annotations-hibernate-fetchprofile-fetchoverride)
        *   [24.2.25. `@FetchProfiles`](#annotations-hibernate-fetchprofiles)
        *   [24.2.26. `@Filter`](#annotations-hibernate-filter)
        *   [24.2.27. `@FilterDef`](#annotations-hibernate-filterdef)
        *   [24.2.28. `@FilterDefs`](#annotations-hibernate-filterdefs)
        *   [24.2.29. `@FilterJoinTable`](#annotations-hibernate-filterjointable)
        *   [24.2.30. `@FilterJoinTables`](#annotations-hibernate-filterjointables)
        *   [24.2.31. `@Filters`](#annotations-hibernate-filters)
        *   [24.2.32. <span class="line-through">`@ForeignKey`</span>](#__span_class_line_through_code_foreignkey_code_span)
        *   [24.2.33. `@Formula`](#annotations-hibernate-formula)
        *   [24.2.34. `@Generated`](#annotations-hibernate-generated)
        *   [24.2.35. `@GeneratorType`](#annotations-hibernate-generatortype)
        *   [24.2.36. `@GenericGenerator`](#annotations-hibernate-genericgenerator)
        *   [24.2.37. `@GenericGenerators`](#annotations-hibernate-genericgenerators)
        *   [24.2.38. `@Immutable`](#annotations-hibernate-immutable)
        *   [24.2.39. <span class="line-through">`@Index`</span>](#annotations-hibernate-index)
        *   [24.2.40. <span class="line-through">`@IndexColumn`</span>](#annotations-hibernate-indexcolumn)
        *   [24.2.41. `@JoinColumnOrFormula`](#annotations-hibernate-joincolumnorformula)
        *   [24.2.42. `@JoinColumnsOrFormulas`](#annotations-hibernate-joincolumnsorformulas)
        *   [24.2.43. `@JoinFormula`](#annotations-hibernate-joinformula)
        *   [24.2.44. `@LazyCollection`](#annotations-hibernate-lazycollection)
        *   [24.2.45. `@LazyGroup`](#annotations-hibernate-lazygroup)
        *   [24.2.46. `@LazyToOne`](#annotations-hibernate-lazytoone)
        *   [24.2.47. `@ListIndexBase`](#annotations-hibernate-listindexbase)
        *   [24.2.48. `@Loader`](#annotations-hibernate-loader)
        *   [24.2.49. `@ManyToAny`](#annotations-hibernate-manytoany)
        *   [24.2.50. `@MapKeyType`](#annotations-hibernate-mapkeytype)
        *   [24.2.51. `@MetaValue`](#annotations-hibernate-metavalue)
        *   [24.2.52. `@NamedNativeQueries`](#annotations-hibernate-namednativequeries)
        *   [24.2.53. `@NamedNativeQuery`](#annotations-hibernate-namednativequery)
        *   [24.2.54. `@NamedQueries`](#annotations-hibernate-namedqueries)
        *   [24.2.55. `@NamedQuery`](#annotations-hibernate-namedquery)
        *   [24.2.56. `@Nationalized`](#annotations-hibernate-nationalized)
        *   [24.2.57. `@NaturalId`](#annotations-hibernate-naturalid)
        *   [24.2.58. `@NaturalIdCache`](#annotations-hibernate-naturalidcache)
        *   [24.2.59. `@NotFound`](#annotations-hibernate-notfound)
        *   [24.2.60. `@OnDelete`](#annotations-hibernate-ondelete)
        *   [24.2.61. `@OptimisticLock`](#annotations-hibernate-optimisticlock)
        *   [24.2.62. `@OptimisticLocking`](#annotations-hibernate-optimisticlocking)
        *   [24.2.63. `@OrderBy`](#annotations-hibernate-orderby)
        *   [24.2.64. `@ParamDef`](#annotations-hibernate-paramdef)
        *   [24.2.65. `@Parameter`](#annotations-hibernate-parameter)
        *   [24.2.66. `@Parent`](#annotations-hibernate-parent)
        *   [24.2.67. `@Persister`](#annotations-hibernate-persister)
        *   [24.2.68. `@Polymorphism`](#annotations-hibernate-polymorphism)
        *   [24.2.69. `@Proxy`](#annotations-hibernate-proxy)
        *   [24.2.70. `@RowId`](#annotations-hibernate-rowid)
        *   [24.2.71. `@SelectBeforeUpdate`](#annotations-hibernate-selectbeforeupdate)
        *   [24.2.72. <span class="line-through">`@Sort`</span>](#annotations-hibernate-sort)
        *   [24.2.73. `@SortComparator`](#annotations-hibernate-sortcomparator)
        *   [24.2.74. `@SortNatural`](#annotations-hibernate-sortnatural)
        *   [24.2.75. `@Source`](#annotations-hibernate-source)
        *   [24.2.76. `@SQLDelete`](#annotations-hibernate-sqldelete)
        *   [24.2.77. `@SQLDeleteAll`](#annotations-hibernate-sqldeleteall)
        *   [24.2.78. `@SqlFragmentAlias`](#annotations-hibernate-sqlfragmentalias)
        *   [24.2.79. `@SQLInsert`](#annotations-hibernate-sqlinsert)
        *   [24.2.80. `@SQLUpdate`](#annotations-hibernate-sqlupdate)
        *   [24.2.81. `@Subselect`](#annotations-hibernate-subselect)
        *   [24.2.82. `@Synchronize`](#annotations-hibernate-synchronize)
        *   [24.2.83. `@Table`](#annotations-hibernate-table)
        *   [24.2.84. `@Tables`](#annotations-hibernate-tables)
        *   [24.2.85. `@Target`](#annotations-hibernate-target)
        *   [24.2.86. `@Tuplizer`](#annotations-hibernate-tuplizer)
        *   [24.2.87. `@Tuplizers`](#annotations-hibernate-tuplizers)
        *   [24.2.88. `@Type`](#annotations-hibernate-type)
        *   [24.2.89. `@TypeDef`](#annotations-hibernate-typedef)
        *   [24.2.90. `@TypeDefs`](#annotations-hibernate-typedefs)
        *   [24.2.91. `@UpdateTimestamp`](#annotations-hibernate-updatetimestamp)
        *   [24.2.92. `@ValueGenerationType`](#annotations-hibernate-valuegenerationtype)
        *   [24.2.93. `@Where`](#annotations-hibernate-where)
        *   [24.2.94. `@WhereJoinTable`](#annotations-hibernate-wherejointable)
*   [25. Performance Tuning and Best Practices](#best-practices)
    *   [25.1. Schema management](#best-practices-schema)
    *   [25.2. Logging](#best-practices-logging)
    *   [25.3. JDBC batching](#best-practices-jdbc-batching)
    *   [25.4. Mapping](#best-practices-mapping)
            *   [25.4.1. Identifiers](#best-practices-mapping-identifiers)
        *   [25.4.2. Associations](#best-practices-mapping-associations)
        *   [25.5. Inheritance](#best-practices-inheritance)
    *   [25.6. Fetching](#best-practices-fetching)
            *   [25.6.1. Fetching associations](#best-practices-fetching-associations)
        *   [25.7. Caching](#best-practices-caching)
*   [26. Legacy Bootstrapping](#appendix-legacy-bootstrap)
*   [27. Migration](#_migration)
*   [28. Legacy Domain Model](#appendix-legacy-domain-model)
*   [29. Legacy Hibernate Criteria Queries](#appendix-legacy-criteria)
    *   [29.1. Creating a `Criteria` instance](#criteria-creating)
    *   [29.2. JPA vs Hibernate entity name](#criteria-entity-name)
    *   [29.3. Narrowing the result set](#criteria-narrowing)
    *   [29.4. Ordering the results](#criteria-ordering)
    *   [29.5. Associations](#criteria-associations)
    *   [29.6. Dynamic association fetching](#criteria-dynamicfetching)
    *   [29.7. Components](#criteria-components)
    *   [29.8. Collections](#criteria-collections)
    *   [29.9. Example queries](#criteria-examples)
    *   [29.10. Projections, aggregation and grouping](#criteria-projection)
    *   [29.11. Detached queries and subqueries](#criteria-detachedqueries)
    *   [29.12. Queries by natural identifier](#query-criteria-naturalid)
*   [30. Legacy Hibernate Native Queries](#appendix-legacy-native-queries)
    *   [30.1. Legacy Named SQL queries](#legacy-sql-named-queries)
    *   [30.2. Legacy return-property to explicitly specify column/alias names](#legacy-propertyresults)
    *   [30.3. Legacy stored procedures for querying](#legacy-sp_query)
    *   [30.4. Legacy rules/limitations for using stored procedures](#legacy-sql-limits-storedprocedures)
    *   [30.5. Legacy custom SQL for create, update and delete](#legacy-sql-cud)
    *   [30.6. Legacy custom SQL for loading](#legacy-sql-load)
*   [31. References](#_references)

